# MangoWC Configuration
# Ported from Hyprland config for probird5
# Docs: https://mangowc.vercel.app/docs

# ========================
# Environment Variables
# ========================
env=XDG_SESSION_TYPE,wayland
env=XDG_CURRENT_DESKTOP,mango
env=XDG_SESSION_DESKTOP,mango
env=ELECTRON_OZONE_PLATFORM_HINT,auto
env=GDK_BACKEND,wayland,x11
env=NVD_BACKEND,direct
env=BROWSER,firefox
env=XCURSOR_SIZE,24

# ========================
# Autostart
# ========================
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=waybar
exec-once=hypridle -c ~/.config/mango/hypridle.conf
exec=bash ~/.config/mango/autostart.sh

# ========================
# Monitors
# ========================
# DP-2: Main landscape 4K 120Hz
monitorrule=name:DP-2,width:3840,height:2160,refresh:120,x:0,y:687,scale:1,vrr:1,rr:0

# DP-3: Vertical portrait 4K 60Hz (270 degrees = rr:3)
monitorrule=name:DP-3,width:3840,height:2160,refresh:60,x:3840,y:0,scale:1,vrr:0,rr:3

# Laptop fallback
monitorrule=name:eDP-1,width:2880,height:1920,refresh:120,x:0,y:0,scale:1.6,vrr:0,rr:0

# ========================
# Window Effects
# ========================
blur=1
blur_layer=0
blur_optimized=1
blur_params_num_passes=1
blur_params_radius=3
blur_params_noise=0.02
blur_params_brightness=0.9
blur_params_contrast=0.9
blur_params_saturation=1.2

shadows=0
border_radius=1

focused_opacity=1.0
unfocused_opacity=1.0

# ========================
# Animations (disabled to match Hyprland config)
# ========================
animations=0
layer_animations=0

# ========================
# Layout Configuration
# ========================
# Master-stack settings (for tile layout on main monitor)
new_is_master=0
default_mfact=0.55
default_nmaster=1
smartgaps=0

# ========================
# Tag Rules - Per-tag per-monitor layouts
# ========================
# Tags 1-5 on DP-2: master-stack (tile)
tagrule=id:1,monitor_name:DP-2,layout_name:tile,no_hide:1
tagrule=id:2,monitor_name:DP-2,layout_name:tile,no_hide:1
tagrule=id:3,monitor_name:DP-2,layout_name:tile
tagrule=id:4,monitor_name:DP-2,layout_name:tile
tagrule=id:5,monitor_name:DP-2,layout_name:tile

# Tags 6-8 on DP-3: vertical tile (full-width vertical stacking)
tagrule=id:6,monitor_name:DP-3,layout_name:vertical_tile,no_hide:1
tagrule=id:7,monitor_name:DP-3,layout_name:vertical_tile
tagrule=id:8,monitor_name:DP-3,layout_name:vertical_tile

# Tag 9 for gaming (no border)
tagrule=id:9,monitor_name:DP-2,layout_name:monocle,no_render_border:1

# ========================
# Appearance
# ========================
gappih=5
gappiv=5
gappoh=20
gappov=20
borderpx=3
rootcolor=0x1a1a2eff
# Dracula theme to match Hyprland colors
bordercolor=0x6272a4aa
focuscolor=0xbd93f9ee
urgentcolor=0xff5555ff
scratchpadcolor=0x516c93ff
globalcolor=0xb153a7ff
overlaycolor=0x14a57cff
maximizescreencolor=0x89aa61ff

# ========================
# Misc
# ========================
no_border_when_single=0
sloppyfocus=1
warpcursor=1
focus_on_activate=1
focus_cross_monitor=0
cursor_size=24
drag_tile_to_tile=1
enable_floating_snap=0

# ========================
# Input
# ========================
repeat_rate=25
repeat_delay=600
numlockon=0
xkb_rules_layout=us

# Trackpad
tap_to_click=1
tap_and_drag=1
drag_lock=1
trackpad_natural_scrolling=1
disable_while_typing=1

# Mouse
mouse_natural_scrolling=0

# ========================
# Overview
# ========================
hotarea_size=10
enable_hotarea=1
ov_tab_mode=0
overviewgappi=5
overviewgappo=30

# ========================
# Window Rules
# ========================
# Picture-in-Picture
windowrule=isfloating:1,title:Picture-in-Picture
windowrule=width:800,height:450,title:Picture-in-Picture

# Thunar file manager
windowrule=isfloating:1,appid:thunar

# Steam games - fullscreen on tag 9
windowrule=isfullscreen:1,tags:9,appid:steam_app_.*

# Terminal swallowing
windowrule=isterm:1,appid:com.mitchellh.ghostty
windowrule=isterm:1,appid:Alacritty

# ========================
# Key Bindings
# ========================

# Core
bind=SUPER,Return,spawn,ghostty
bind=SUPER,q,killclient,
bind=SUPER+SHIFT,q,quit
bind=SUPER,e,spawn,thunar
bind=SUPER,p,spawn,rofi -show drun -show-icons -theme /home/probird5/.config/rofi/theme.rasi
bind=SUPER,d,togglefullscreen,
bind=SUPER,m,togglemaximizescreen,
bind=SUPER,v,togglefloating,
bind=SUPER,s,toggle_scratchpad
bind=SUPER+SHIFT,r,reload_config

# Screenshot
bind=NONE,Print,spawn,grim -g "$(slurp -d)" - | swappy -f -

# Wallpaper
bind=SUPER,w,spawn,bash ~/.config/mango/change-wallpaper.sh

# Focus direction (arrow keys)
bind=SUPER,Left,focusdir,left
bind=SUPER,Right,focusdir,right
bind=SUPER,Up,focusdir,up
bind=SUPER,Down,focusdir,down

# Focus direction (vim keys)
bind=SUPER,h,focusdir,left
bind=SUPER,l,focusdir,right
bind=SUPER,k,focusdir,up
bind=SUPER,j,focusdir,down

# Swap/move windows (arrow keys)
bind=SUPER+SHIFT,Left,exchange_client,left
bind=SUPER+SHIFT,Right,exchange_client,right
bind=SUPER+SHIFT,Up,exchange_client,up
bind=SUPER+SHIFT,Down,exchange_client,down

# Swap/move windows (vim keys)
bind=SUPER+SHIFT,h,exchange_client,left
bind=SUPER+SHIFT,l,exchange_client,right
bind=SUPER+SHIFT,k,exchange_client,up
bind=SUPER+SHIFT,j,exchange_client,down

# Resize windows (arrow keys)
bind=SUPER+CTRL,Left,resizewin,-20,+0
bind=SUPER+CTRL,Right,resizewin,+20,+0
bind=SUPER+CTRL,Up,resizewin,+0,-20
bind=SUPER+CTRL,Down,resizewin,+0,+20

# Resize windows (vim keys)
bind=SUPER+CTRL,h,resizewin,-20,+0
bind=SUPER+CTRL,l,resizewin,+20,+0
bind=SUPER+CTRL,k,resizewin,+0,-20
bind=SUPER+CTRL,j,resizewin,+0,+20

# Switch layout / overview
bind=SUPER,n,switch_layout
bind=SUPER,Tab,toggleoverview,

# Tag switching (view tag)
bind=SUPER,1,view,1,0
bind=SUPER,2,view,2,0
bind=SUPER,3,view,3,0
bind=SUPER,4,view,4,0
bind=SUPER,5,view,5,0
bind=SUPER,6,view,6,0
bind=SUPER,7,view,7,0
bind=SUPER,8,view,8,0
bind=SUPER,9,view,9,0
bind=SUPER,0,view,9,0

# Move window to tag
bind=SUPER+SHIFT,1,tag,1,0
bind=SUPER+SHIFT,2,tag,2,0
bind=SUPER+SHIFT,3,tag,3,0
bind=SUPER+SHIFT,4,tag,4,0
bind=SUPER+SHIFT,5,tag,5,0
bind=SUPER+SHIFT,6,tag,6,0
bind=SUPER+SHIFT,7,tag,7,0
bind=SUPER+SHIFT,8,tag,8,0
bind=SUPER+SHIFT,9,tag,9,0
bind=SUPER+SHIFT,0,tag,9,0

# Monitor focus
bind=SUPER+ALT,Left,focusmon,left
bind=SUPER+ALT,Right,focusmon,right
bind=SUPER+ALT,h,focusmon,left
bind=SUPER+ALT,l,focusmon,right

# Move window to other monitor
bind=SUPER+ALT+SHIFT,Left,tagmon,left
bind=SUPER+ALT+SHIFT,Right,tagmon,right

# Gaps
bind=SUPER+SHIFT,equal,incgaps,1
bind=SUPER+SHIFT,minus,incgaps,-1

# Volume and brightness
bind=NONE,XF86MonBrightnessUp,spawn,brightnessctl s +5%
bind=NONE,XF86MonBrightnessDown,spawn,brightnessctl s 5%-
bind=NONE,XF86AudioRaiseVolume,spawn,pamixer -i 5
bind=NONE,XF86AudioLowerVolume,spawn,pamixer -d 5
bind=NONE,XF86AudioMicMute,spawn,pamixer --default-source -m
bind=NONE,XF86AudioMute,spawn,pamixer -t
bind=NONE,XF86AudioPlay,spawn,playerctl play-pause
bind=NONE,XF86AudioPause,spawn,playerctl play-pause
bind=NONE,XF86AudioNext,spawn,playerctl next
bind=NONE,XF86AudioPrev,spawn,playerctl previous

# Mouse bindings
mousebind=SUPER,btn_left,moveresize,curmove
mousebind=SUPER,btn_right,moveresize,curresize

# Scroll through tags
axisbind=SUPER,UP,viewtoleft_have_client
axisbind=SUPER,DOWN,viewtoright_have_client

# Layer rules
layerrule=animation_type_open:zoom,layer_name:rofi
layerrule=animation_type_close:zoom,layer_name:rofi
